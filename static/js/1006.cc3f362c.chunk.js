"use strict";(self.webpackChunkalfa_invest=self.webpackChunkalfa_invest||[]).push([[1006],{1006:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(1413),s=n(168),a=n(2791),i=n(7939),o=n(9439),d=n(4653),c=n(4175),l=n(2250),u=n(763),h=n(9925),x=n(9279),m=n(631),j=n(6591),p=n(3282),g=n(9314),f=n(3168),y=n(6871),b=n(7892),v=n.n(b),w=n(967),k=n(2007),Z=n.n(k);function C(){return C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C.apply(this,arguments)}function O(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var S=(0,a.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,s=e.size,i=void 0===s?24:s,o=O(e,["color","size"]);return a.createElement("svg",C({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),a.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),a.createElement("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}))}));S.propTypes={color:Z().string,size:Z().oneOfType([Z().string,Z().number])},S.displayName="DollarSign";var X=S;function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}function I(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var T=(0,a.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,s=e.size,i=void 0===s?24:s,o=I(e,["color","size"]);return a.createElement("svg",B({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),a.createElement("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.createElement("polygon",{points:"22 2 15 22 11 13 2 9 22 2"}))}));T.propTypes={color:Z().string,size:Z().oneOfType([Z().string,Z().number])},T.displayName="Send";var D,_=T,N=n(8965),Y=n(1830),J=n.n(Y),E=n(948),L=n(4519),A=n(8971),F=n(4179),M=n(8083),P=n(184),z=function(e){Object.assign({},e);var t=(0,f.$)().t,n=(0,y.UO)().id,r=(0,y.s0)(),s=(0,a.useState)(null),i=(0,o.Z)(s,2),b=i[0],k=i[1],Z=(0,a.useState)(null),C=(0,o.Z)(Z,2),O=C[0],S=C[1],B=(0,h.xq)({id:n,key:x.t.agreements,url:m.n.agreements}),I=B.data,T=B.isLoading,D=(B.isError,(0,h.i7)({id:n,key:x.t.policyFilter,url:m.n.policyFilter,params:{params:{agreementsId:n}}})),Y=D.data,z=D.isLoading,q=(0,h.xq)({id:n,key:x.t.endorsementFilter,url:m.n.endorsementFilter}),K=q.data,V=q.isLoading,R=(0,h.n7)({listKeyId:x.t.agreements}),H=R.mutate,W=(R.isLoadingSendToFond,(0,h.V0)({listKeyId:x.t.policyFilter})),U=W.mutate,$=W.isLoading,G=(0,h.V0)({listKeyId:x.t.endorsementFilter}),Q=G.mutate,ee=G.isLoading,te=(0,g.o)((function(e){return(0,u.get)(e,"user")})),ne=(0,h.i7)({key:x.t.transactions,url:m.n.transactions,enabled:!!(0,u.get)(te,"branch_Id.id"),params:{params:{branch:(0,u.get)(te,"branch_Id.id"),limit:100}}}),re=ne.data,se=(ne.isLoading,(0,h.n7)({listKeyId:x.t.policyFilter})),ae=se.mutate,ie=se.isLoading,oe=(0,g.o)((function(e){return(0,u.get)(e,"setBreadcrumbs",(function(){}))})),de=(0,a.useMemo)((function(){return[{id:1,title:t("Agreements"),path:"/agreements"},{id:2,title:n,path:"#"}]}),[I]);(0,a.useEffect)((function(){oe(de)}),[]);return T||$||z||V||ee?(0,P.jsx)(j.E,{}):(console.log("s",b),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(c.Z,{children:[(0,P.jsx)(d.X2,{className:"",align:"center",children:(0,P.jsx)(d.JX,{xs:12,children:(0,P.jsx)(l.Z,{children:t("Agreement view")})})}),(0,P.jsxs)(d.X2,{children:[(0,P.jsx)(d.JX,{xs:6,children:(0,P.jsxs)(p.Z,{thead:["1","2"],children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("groupofproductsId")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:(0,u.get)(I,"data.data.groupofproductsId.name")})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("subgroupofproductsId")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:(0,u.get)(I,"data.data.subgroupofproductsId.name")})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("products")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:(0,u.get)(I,"data.data.products.productname")})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("startofinsurance")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:v()((0,u.get)(I,"data.data.startofinsurance")).format("DD/MM/YYYY")})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("endofinsurance")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:v()((0,u.get)(I,"data.data.endofinsurance")).format("DD/MM/YYYY")})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("clinets")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:(0,u.get)(I,"data.data.clinets.forindividualsdata.name")})})]})]})}),(0,P.jsx)(d.JX,{xs:6,children:(0,P.jsxs)(p.Z,{thead:["1","2"],children:[(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("whoaccepted")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:(0,u.get)(I,"data.data.whoaccepted")})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("totalinsurancepremium")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:(0,P.jsx)(E.Z,{displayType:"text",thousandSeparator:" ",value:(0,u.get)(I,"data.data.totalinsurancepremium")})})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("totalsuminsured")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:(0,P.jsx)(E.Z,{displayType:"text",thousandSeparator:" ",value:(0,u.get)(I,"data.data.totalsuminsured")})})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("paidinsurancepremium")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:(0,P.jsx)(E.Z,{displayType:"text",thousandSeparator:" ",value:(0,u.get)(I,"data.data.paidinsurancepremium")})})})]}),(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:t("Status")}),(0,P.jsx)("td",{children:(0,P.jsx)("strong",{children:t((0,u.get)(I,"data.data.status"))})})]})]})})]}),(0,P.jsxs)(d.X2,{className:"mt-15",children:[(0,P.jsxs)(d.JX,{xs:6,children:[(0,P.jsxs)(d.X2,{align:"center",children:[(0,P.jsx)(d.JX,{xs:8,children:(0,P.jsx)(l.Z,{sm:!0,children:"\u041f\u043e\u043b\u0438\u0441"})}),(0,P.jsx)(d.JX,{xs:4,className:"text-right",children:(0,P.jsx)(w.Z,{green:!0,onClick:function(){return r("/policy/create/".concat(n))},className:"mr-16",type:"button",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u0438\u0441"})})]}),(0,P.jsx)(d.X2,{className:"mt-15",children:(0,u.get)(Y,"data.data",[]).length>0&&(0,P.jsxs)(d.JX,{xs:12,children:[(0,P.jsx)("hr",{}),(0,P.jsx)(p.Z,{hideThead:!1,thead:["Policy number","Issue date","Attached sum","Status","Action"],children:(0,u.get)(Y,"data.data",[]).map((function(e,r){return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,u.get)(e,"policy_number","-")}),(0,P.jsx)("td",{children:v()((0,u.get)(e,"dateofissue")).format("DD/MM/YYYY")}),(0,P.jsx)("td",{children:(0,P.jsx)(E.Z,{displayType:"text",thousandSeparator:" ",value:(0,u.get)(e,"attachedSum")})}),(0,P.jsx)("td",{children:(0,u.get)(e,"status")}),(0,P.jsxs)("td",{className:"",children:["new"===(0,u.get)(e,"status")&&(0,P.jsx)(X,{onClick:function(){return k(e)},className:"cursor-pointer",color:"#71BC70"}),"new"===(0,u.get)(e,"status")&&(0,P.jsx)(_,{className:"cursor-pointer ml-15",color:"#13D6D1",onClick:function(){return t=n,r=(0,u.get)(e,"_id"),void H({url:"".concat(m.n.sendToFond,"?agreementId=").concat(t,"&policyId=").concat(r)});var t,r}}),"new"===(0,u.get)(e,"status")&&(0,P.jsx)(N.Z,{onClick:function(){return function(e){J().fire({position:"center",icon:"error",backdrop:"rgba(0,0,0,0.9)",background:"none",title:t("Are you sure?"),showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#13D6D1",confirmButtonText:t("Delete"),cancelButtonText:t("Cancel"),customClass:{title:"title-color"}}).then((function(t){t.isConfirmed&&U({url:"".concat(m.n.policy,"/").concat(e)})}))}((0,u.get)(e,"_id",null))},className:"ml-15 cursor-pointer",color:"#dc2626"})]})]},r+1)}))})]})})]}),(0,P.jsxs)(d.JX,{xs:6,children:[(0,P.jsxs)(d.X2,{align:"center",children:[(0,P.jsxs)(d.JX,{xs:8,children:[" ",(0,P.jsx)(l.Z,{sm:!0,children:"\u0418\u043d\u0434\u043e\u0441\u0430\u043c\u0435\u043d\u0442\u044b"})]}),(0,P.jsxs)(d.JX,{xs:4,className:"text-right",children:[" ",(0,P.jsx)(w.Z,{onClick:function(){return r("/endorsement/create/".concat(n))},green:!0,type:"button",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0434\u043e\u0441\u0430\u043c\u0435\u043d\u0442\u044b"})]})]}),(0,P.jsx)(d.X2,{className:"mt-15",children:(0,u.get)(K,"data.data",[]).length>0&&(0,P.jsxs)(d.JX,{xs:12,children:[(0,P.jsx)("hr",{}),(0,P.jsx)(p.Z,{hideThead:!1,thead:["Type","Status","Conclusion","Action"],children:(0,u.get)(K,"data.data",[]).map((function(e,n){return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,u.get)(e,"typeofendorsements.name","-")}),(0,P.jsx)("td",{children:(0,u.get)(e,"statusofendorsements.name","-")}),(0,P.jsx)("td",{children:(0,u.get)(e,"reqforconclusion","-")}),(0,P.jsx)("td",{className:"cursor-pointer",onClick:function(){return function(e){J().fire({position:"center",icon:"error",backdrop:"rgba(0,0,0,0.9)",background:"none",title:t("Are you sure?"),showConfirmButton:!0,showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#13D6D1",confirmButtonText:t("Delete"),cancelButtonText:t("Cancel"),customClass:{title:"title-color"}}).then((function(t){t.isConfirmed&&Q({url:"".concat(m.n.endorsements,"/").concat(e)})}))}((0,u.get)(e,"_id",null))},children:(0,P.jsx)(N.Z,{color:"#dc2626"})})]},n+1)}))})]})})]})]})]}),(0,P.jsxs)(F.Z,{title:"\u0420\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043a \u043f\u043e\u043b\u0438\u0441\u0443",visible:!(0,u.isNil)(b),hide:function(){return k(null)},children:[ie&&(0,P.jsx)(j.p,{}),(0,P.jsx)(p.Z,{bordered:!0,hideThead:!1,thead:["","\u2116","\u0414\u0430\u0442\u0430 \u043f/\u043f","\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f","\u0421\u0443\u043c\u043c\u0430 \u043f\u043e\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f"],children:(0,u.get)(re,"data.data",[]).map((function(e,t){return(0,P.jsxs)("tr",{children:[(0,P.jsx)("td",{children:(0,P.jsx)(M.Z,{checked:(0,u.isEqual)(O,(0,u.get)(e,"_id")),onChange:function(t){var n;null!==(n=t.target)&&void 0!==n&&n.checked?S((0,u.get)(e,"_id")):S(null)}})}),(0,P.jsx)("td",{children:t+1}),(0,P.jsx)("td",{children:v()((0,u.get)(e,"payment_order_date")).format("DD.MM.YYYY")}),(0,P.jsx)("td",{children:(0,u.get)(e,"sender_name")}),(0,P.jsx)("td",{children:(0,P.jsx)(E.Z,{displayType:"text",thousandSeparator:" ",value:(0,u.get)(e,"payment_amount",0)})})]},(0,u.get)(e,"_id"))}))}),O&&(0,P.jsx)(L.Z,{formRequest:function(e){var t=e.data.attachmentSum;ae({url:m.n.transactionAttach,attributes:{transactionId:O,policyId:(0,u.get)(b,"id"),attachmentSum:t}},{onSuccess:function(){S(null),k(null)},onError:function(){}})},footer:(0,P.jsx)(w.Z,{type:"submit",children:"\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c"}),children:(0,P.jsxs)(d.X2,{className:"mt-15",children:[(0,P.jsx)(d.JX,{xs:6,children:(0,P.jsx)(A.Z,{defaultValue:(0,u.sumBy)((0,u.get)(b,"riskId",[]),"insurancepremium"),label:"\u0421\u0443\u043c\u043c\u0430 \u043e\u043f\u043b\u0430\u0442\u044b \u043f\u043e \u043f\u043e\u043b\u0438\u0441\u0443:",property:{disabled:!0},type:"number-format-input",name:"sumInsurancePremium"})}),(0,P.jsx)(d.JX,{xs:6,children:(0,P.jsx)(A.Z,{defaultValue:(0,u.get)(b,"attachedSum",0),property:{disabled:!0},type:"number-format-input",name:"attachedSum",label:"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u044b\u0445 \u0441\u0440\u0435\u0434\u0441\u0442\u0432:"})}),(0,P.jsx)(d.JX,{xs:6,children:(0,P.jsx)(A.Z,{type:"number-format-input",name:"attachmentSum",label:"\u0421\u0443\u043c\u043c\u0430 \u043a \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u0438\u044e:"})})]})})]})]}))},q=i.ZP.div(D||(D=(0,s.Z)(["\n  .box__outlined{\n    border:1px dotted #BABABA;\n    padding: 15px;\n    margin-top: 15px;\n    margin-bottom: 15px;\n  }\n  .rodal-dialog{\n    min-height: 60vh !important;\n  }\n"]))),K=function(e){var t=Object.assign({},e);return(0,P.jsx)(q,(0,r.Z)((0,r.Z)({},t),{},{children:(0,P.jsx)(z,{})}))}}}]);
//# sourceMappingURL=1006.cc3f362c.chunk.js.map