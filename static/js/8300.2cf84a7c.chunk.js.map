{"version":3,"file":"static/js/8300.2cf84a7c.chunk.js","mappings":"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","sources":["modules/products/containers/AgreementViewContainer.jsx","modules/products/pages/AgreementViewPage.jsx"],"sourcesContent":["import React, {useEffect, useMemo, useState} from 'react';\r\nimport {Row, Col} from \"react-grid-system\";\r\nimport Section from \"../../../components/section\";\r\nimport Title from \"../../../components/ui/title\";\r\nimport {get} from \"lodash\";\r\nimport {useDeleteQuery, useGetOneQuery, usePostQuery} from \"../../../hooks/api\";\r\nimport {KEYS} from \"../../../constants/key\";\r\nimport {URLS} from \"../../../constants/url\";\r\nimport {ContentLoader, OverlayLoader} from \"../../../components/loader\";\r\nimport Table from \"../../../components/table\";\r\nimport {useStore} from \"../../../store\";\r\nimport {useTranslation} from \"react-i18next\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport dayjs from \"dayjs\";\r\nimport Button from \"../../../components/ui/button\";\r\nimport Flex from \"../../../components/flex\";\r\nimport Form from \"../../../containers/form/form\";\r\nimport Field from \"../../../containers/form/field\";\r\nimport Modal from \"../../../components/modal\";\r\nimport {Trash2} from \"react-feather\";\r\nimport Swal from \"sweetalert2\";\r\n\r\nconst AgentViewContainer = ({...rest}) => {\r\n    const {t} = useTranslation();\r\n    const {id} = useParams()\r\n    const [open, setOpen] = useState(false);\r\n    let {data, isLoading, isError} = useGetOneQuery({id, key: KEYS.agreements, url: URLS.agreements})\r\n    const {mutate: createPolicy, isLoadingPolicy} = usePostQuery({listKeyId: KEYS.agreements})\r\n    const {mutate: deleteRequest, isLoading: deleteLoading} = useDeleteQuery({listKeyId: KEYS.agreements})\r\n    const setBreadcrumbs = useStore(state => get(state, 'setBreadcrumbs', () => {\r\n    }))\r\n    const breadcrumbs = useMemo(() => [\r\n        {\r\n            id: 1,\r\n            title: t('Agreements'),\r\n            path: '/agreements',\r\n        },\r\n        {\r\n            id: 2,\r\n            title: id,\r\n            path: '#',\r\n        }\r\n    ], [data])\r\n\r\n    useEffect(() => {\r\n        setBreadcrumbs(breadcrumbs)\r\n    }, [])\r\n\r\n    const addPolicy = (data) => {\r\n        createPolicy({url: URLS.policy, attributes: {...data, agreementsId: id, copyofdocuments: 'xxxxxxxxx'}}, {\r\n            onSuccess: () => {\r\n                setOpen(false);\r\n            },\r\n            onError: () => {\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    const remove = (id) => {\r\n        Swal.fire({\r\n            position: 'center',\r\n            icon: 'error',\r\n            backdrop: 'rgba(0,0,0,0.9)',\r\n            background: 'none',\r\n            title: t('Are you sure?'),\r\n            showConfirmButton: true,\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#d33',\r\n            cancelButtonColor: '#13D6D1',\r\n            confirmButtonText: t('Delete'),\r\n            cancelButtonText:t('Cancel'),\r\n            customClass: {\r\n                title: 'title-color',\r\n            },\r\n        }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                deleteRequest({url: `${URLS.policy}/${id}`})\r\n            }\r\n        });\r\n    }\r\n\r\n    if (isLoading || deleteLoading) {\r\n        <OverlayLoader/>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Section>\r\n                <Row className={''} align={'center'}>\r\n                    <Col xs={12}>\r\n                        <Title>Agreement view</Title>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    <Col xs={6}>\r\n                        <Table thead={['1', '2']}>\r\n                            <tr>\r\n                                <td>{t(\"groupofproductsId\")}</td>\r\n                                <td><strong>{get(data, \"data.data.groupofproductsId.name\")}</strong></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>{t(\"subgroupofproductsId\")}</td>\r\n                                <td><strong>{get(data, \"data.data.subgroupofproductsId.name\")}</strong></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>{t(\"products\")}</td>\r\n                                <td><strong>{get(data, \"data.data.products.productname\")}</strong></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>{t(\"startofinsurance\")}</td>\r\n                                <td>\r\n                                    <strong>{dayjs(get(data, \"data.data.startofinsurance\")).format(\"DD/MM/YYYY\")}</strong>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>{t(\"endofinsurance\")}</td>\r\n                                <td><strong>{dayjs(get(data, \"data.data.endofinsurance\")).format(\"DD/MM/YYYY\")}</strong>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr>\r\n                                <td>{t(\"clinets\")}</td>\r\n                                <td><strong>{get(data, \"data.data.clinets.forindividualsdata.name\")}</strong></td>\r\n                            </tr>\r\n\r\n\r\n                        </Table>\r\n                    </Col>\r\n                    <Col xs={6}>\r\n                        <Table thead={['1', '2']}>\r\n                            <tr>\r\n                                <td>{t(\"whoaccepted\")}</td>\r\n                                <td><strong>{get(data, \"data.data.whoaccepted\")}</strong></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>{t(\"totalinsurancepremium\")}</td>\r\n                                <td><strong>{get(data, \"data.data.totalinsurancepremium\")}</strong></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>{t(\"totalsuminsured\")}</td>\r\n                                <td><strong>{get(data, \"data.data.totalsuminsured\")}</strong></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>{t(\"paidinsurancepremium\")}</td>\r\n                                <td><strong>{get(data, \"data.data.paidinsurancepremium\")}</strong></td>\r\n                            </tr>\r\n                        </Table>\r\n                    </Col>\r\n                </Row>\r\n                <Row className={'mt-15'}>\r\n                    <Col xs={6}>\r\n                        <Row align={'center'}>\r\n                            <Col xs={8}><Title sm>Полис</Title></Col>\r\n                            <Col xs={4} className={'text-right'}>\r\n                                <Button green onClick={() => setOpen(true)} className={'mr-16'} type={'button'}>Добавить\r\n                                    полис</Button>\r\n\r\n                            </Col>\r\n                        </Row>\r\n                        <Row className={'mt-15'}>\r\n                            {get(data, \"data.data.policy\", []).length > 0 && <Col xs={12}>\r\n                                <hr/>\r\n                                <Table hideThead={false}\r\n                                       thead={['Policy number', 'Form number', 'Issue date', 'Action']}>\r\n                                    {get(data, \"data.data.policy\", []).map((item, i) => <tr key={i + 1}>\r\n                                        <td>\r\n                                            {get(item, 'policynumber', '-')}\r\n                                        </td>\r\n                                        <td>\r\n                                            {get(item, 'formno', '-')}\r\n                                        </td>\r\n                                        <td>\r\n                                            {dayjs(get(item, 'dateofissue')).format('DD/MM/YYYY')}\r\n                                        </td>\r\n                                        <td className={'cursor-pointer'}\r\n                                            onClick={() => remove(get(item, '_id', null))}>\r\n                                            <Trash2 color={'#dc2626'}/>\r\n                                        </td>\r\n                                    </tr>)}\r\n                                </Table>\r\n                            </Col>\r\n                            }\r\n                        </Row>\r\n                    </Col>\r\n                    <Col xs={6}>\r\n                        <Row align={'center'}>\r\n                            <Col xs={8}> <Title sm>Индосаменты</Title></Col>\r\n                            <Col xs={4} className={'text-right'}> <Button green type={'button'}>Добавить\r\n                                индосаменты</Button></Col>\r\n                        </Row>\r\n\r\n                    </Col>\r\n                </Row>\r\n            </Section>\r\n            <Modal title={'Добавить полис'} visible={open}\r\n                   hide={setOpen}>\r\n                {isLoadingPolicy && <ContentLoader/>}\r\n                <Form formRequest={({data}) => {\r\n                    addPolicy(data);\r\n                }}\r\n                      footer={<><Button>{t(\"Add\")}</Button></>}>\r\n                    <Row className={'mt-15'}>\r\n                        <Col xs={6}>\r\n                            <Field\r\n                                type={'input'}\r\n                                name={`policynumber`}\r\n                            />\r\n                        </Col>\r\n                        <Col xs={6}>\r\n                            <Field\r\n                                type={'input'}\r\n                                name={`formnumber`}\r\n                            />\r\n                        </Col>\r\n                        <Col xs={6}>\r\n                            <Field\r\n                                type={'datepicker'}\r\n                                name={`dateofissue`}\r\n                            />\r\n                        </Col>\r\n                        <Col xs={6}>\r\n                            <Field\r\n                                type={'dropzone'}\r\n                                name={`copyofdocuments`}\r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                </Form>\r\n            </Modal>\r\n        </>\r\n    )\r\n        ;\r\n};\r\n\r\nexport default AgentViewContainer;","import React from 'react';\r\nimport styled from \"styled-components\";\r\nimport AgreementViewContainer from \"../containers/AgreementViewContainer\";\r\n\r\n\r\nconst Styled = styled.div`\r\n  .box__outlined{\r\n    border:1px dotted #BABABA;\r\n    padding: 15px;\r\n    margin-top: 15px;\r\n    margin-bottom: 15px;\r\n  }\r\n`;\r\nconst AgentViewPage = ({...rest}) => {\r\n    return (\r\n        <Styled {...rest}>\r\n            <AgreementViewContainer />\r\n        </Styled>\r\n    );\r\n};\r\n\r\nexport default AgentViewPage;"],"names":["t","useTranslation","id","useParams","useState","open","setOpen","useGetOneQuery","key","KEYS","url","URLS","data","isLoading","isError","usePostQuery","listKeyId","createPolicy","mutate","isLoadingPolicy","useDeleteQuery","deleteRequest","deleteLoading","setBreadcrumbs","useStore","state","get","breadcrumbs","useMemo","title","path","useEffect","className","align","xs","thead","dayjs","format","sm","green","onClick","type","length","hideThead","map","item","i","Swal","position","icon","backdrop","background","showConfirmButton","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","customClass","then","result","isConfirmed","remove","color","visible","hide","formRequest","attributes","agreementsId","copyofdocuments","onSuccess","onError","addPolicy","footer","name","Styled","styled","rest","AgreementViewContainer"],"sourceRoot":""}